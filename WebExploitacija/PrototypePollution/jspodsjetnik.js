let ben="Tekst";
console.log(ben);

//------------------------------------

let personPrototype={
    introduce: function(){
        return `Bok, ja sam ${this.name}`;
    }
};

function Person(name){
    let person=Object.create(personPrototype);
    person.name=name;
    return person;
}

let ben2=Person('ben');
ben2.__proto__.introduce=function(){console.log("Funkcija ima novi tekst");return "Povratak iz proto funkcije";}
console.log(ben2.introduce());

//------------------------------------
const _ = require("lodash");

let friends = [ { id: 1, name: "testuser", age: 25, country: "UK", reviews: [], albums: [{ }], password: "xxx", } ]; 
_.set(friends,"[0].name","user"); //objasnjenje _.set(friends,"[0].name","user"); friends je varijabla koju uzimamo, [0].name posto je friends array, uzimamo prvi element u njemu polje name, te ga prepisujemo sa user
console.log(friends);

//-----------------------------------
const obj = { "__proto__": { "newProperty": "value" } };

console.log(obj.newProperty); // "value"

const obj2 = { newProperty: "original" };
console.log(obj2.newProperty); // "original"

obj2.__proto__ = { newProperty: "value" };
console.log(obj2.newProperty); // "original"
//princip nasljeÄ‘ivanja
const animal = { eats: true };
const dog = { bark: true };

dog.__proto__ = animal; // set prototype of dog to animal

console.log(dog.bark); // true  (own property)
console.log(dog.eats); // true  (inherited from animal via __proto__)
console.log(dog.toString); // function... (inherited from Object.prototype)


//Crashanje preko toString funkcije
//ideja iza toga je da pri prikazu stranica toString se cesto koristi za prikaz i pokusavamo ju overridati





//Primjeri iz vjezbe
//Ako imamo polje koje nije snaitizirano dobro (mozemo provjeriti preko xss napada, tipa <script> ili slicno)
//Ili ako postoji u kodu merge/recursive merge gdje se nesto nadodaje na listu mozemo testirati preko  { "__proto__": { "newProperty": "value" } } 
//isto vrijedi i za metodu Object.prototype.toString, u nekome polju koje je nesigurno mozemo staviti {"__proto__": {"toString": "Just crash the server"}} da se izvrsi i promjeni toString fukciju
//na princip toString mozemo overwritati toJSON, valueOf, contructor i slicne metode.